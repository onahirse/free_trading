# Алгоритмический торговый бот для Bybit

## Описание

Проект представляет собой модульную систему алгоритмической торговли криптовалютой с поддержкой бэктестинга для биржи Bybit. Основные возможности:

- Загрузка и хранение исторических данных (OHLCV) для анализа
- Реализация торговых стратегий на основе технических индикаторов
- Бэктестинг стратегий на исторических данных
- Интеграция с Telegram для уведомлений и управления
- Управление рисками и размером позиций
- Конфигурация через YAML файл
# free_trading — модульный фреймворк для бэктестинга и алгоритмической торговли

Это репозиторий с набором инструментов для получения исторических данных (OHLCV), разработки и бэктестинга торговых стратегий, управления позициями и рисками, а также генерации отчётов. Проект ориентирован на работу с биржами (включая Bybit) и содержит как утилиты для оффлайн-бэктестинга, так и интеграцию для запуска торговых сценариев.

Документация в этом README обновлена и отражает состояние проекта на момент редактирования.

## Ключевые возможности

- Загрузка и хранение исторических OHLCV в `DATA_OHLCV/`
- Модульный бэктестер в `src/backtester/`
- Компоненты управления портфелем и рисками в `src/portfolio/` и `risk_manager/`
- Утилиты получения данных в `src/data_fetcher/`
- Генерация HTML-отчётов в `TEMPLATES/` и `reports/`
- Конфигурация через YAML файлы в `configs/` и `config/`

## Структура репозитория (упрощённо)

Основные директории и файлы:

- `app.py` — основной скрипт/точка входа (возможные CLI-опции для загрузки/бэктеста/отладки)
- `configs/` — файлы конфигурации (например `config.yaml`, `config.yaml.example`)
- `DATA_OHLCV/` — каталог для CSV и Excel с историческими данными
- `LOGS/` — лог-файлы
- `reports/` — сгенерированные HTML-отчёты
- `src/` — исходный код проекта со следующими ключевыми подпапками:
   - `backtester/` — движок для бэктестинга и тесты для него
   - `data_fetcher/` — загрузчики/парсеры данных
   - `portfolio/` — расчёты метрик и управление капиталом
   - `trading_engine/` — ядро исполнения/менеджмента ордеров
   - `risk_manager/` — правила риск-менеджмента
   - `reports/` — сборщики и сериализаторы отчётов
   - `utils/`, `debugger/`, `logical/` и др. — вспомогательные модули
- `TEMPLATES/` — HTML-шаблоны для отчётов (версии v1, v2, ...)
- `Dockerfile`, `docker-compose.yml` — контейнеризация
- `requirements.txt` — зависимости Python

Примечание: в репозитории есть несколько мест с конфигурацией (`configs/` и `config/`). Основной конфиг, используемый приложением, находится в `configs/config.yaml` (приоритет — содержимому проекта), но конкретный файл конфигурации может передаваться через переменные окружения или аргументы командной строки в зависимости от реализации.

## Быстрый старт (Windows PowerShell)

1) Создайте и активируйте виртуальное окружение (PowerShell):

```powershell
python -m venv .venv
.\.venv\Scripts\Activate.ps1
```

2) Установите зависимости:

```powershell
pip install -r requirements.txt
```

3) Скопируйте пример конфигурации и отредактируйте `configs/config.yaml` по своему окружению:

```powershell
copy configs\config.yaml.example configs\config.yaml
# затем отредактируйте configs\config.yaml в любом редакторе
```

4) Подготовьте данные (если нужно) — положите CSV/Excel в `DATA_OHLCV/csv_files/` или используйте модуль `src/data_fetcher/` для загрузки.

5) Запуск основных сценариев (в зависимости от реализации CLI в `app.py`):

- Запуск бэктеста (предположение: `--btest`):

```powershell
python .\app.py --btest
```

- Загрузка исторических данных (предположение: `--ldata`):

```powershell
python .\app.py --ldata
```

- Режим отладки/локальная разработка (предположение: `--debug`):

```powershell
python .\app.py --debug
```

Если у вас другая CLI-логика, используйте `python .\app.py -h` для получения справки.

(Примечание: я исходил из существующих флагов `--btest`, `--ldata`, `--debug`, упомянутых в проекте; если они изменились, откройте `app.py` и адаптируйте команды.)

## Docker

Для запуска через Docker (рекомендуется, если настроены образы в `docker-compose.yml`):

```powershell
# собрать и запустить сервисы (Compose v2+)
docker compose up --build

# или, если используется старый синтаксис
docker-compose up --build
```

Для остановки и удаления контейнеров:

```powershell
docker compose down
```

Тома/папки, которые проект монтирует/использует при запуске:

- `DATA_OHLCV/` — исторические данные
- `configs/` — конфигурация
- `LOGS/` — лог-файлы
- `reports/` — отчёты

## Тесты

В проекте присутствуют тесты (например, `src/backtester/test_backtest_engine.py`, `src/data_fetcher/test_data_fetcher.py` и др.). Запустите их через `pytest`:

```powershell
pip install -r requirements.txt
pytest -q
```

Если у вас возникают ошибки тестов, проверьте используемую версию Python и зависимости (в проекте есть файлы .pyc для Python 3.13 — рекомендуется использовать совместимую версию).

## Где искать конфигурацию и данные

- Основной конфиг: `configs/config.yaml` (пример: `configs/config.yaml.example`)
- Исторические данные: `DATA_OHLCV/csv_files/`, `DATA_OHLCV/excel/`
- Логи: `LOGS/logs.log`
- Отчёты: `reports/` и `TEMPLATES/` для шаблонов

## Советы для разработки

- При добавлении новых зависимостей обновляйте `requirements.txt`.
- Пишите тесты для новых компонентов и прогоняйте `pytest` перед PR.
- Логируйте важные шаги в `LOGS/` — это упростит анализ бэктестов и живых запусков.

## Частые замечания / предположения

- README обновлён на основе текущей структуры репозитория, но команда CLI в `app.py` и приоритет конфигов (какой файл используется по умолчанию) могут отличаться в зависимости от реализации — при необходимости откройте `app.py` и `src/config/` для точной информации.
- Не вносил изменений в код — только документацию.

---

Если хотите, могу:

- добавить секцию с примером конфигурации (вырезать ключи и узлы из `configs/config.yaml`) — безопасно для репозитория;
- сгенерировать краткий список часто используемых команд CLI, найденных прямо в `app.py` (прочитаю CLI-парсер и вставлю автоматом).

Скажите, нужно ли включить что-то из этого.
